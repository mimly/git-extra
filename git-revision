#!/bin/bash

source fs4git.sh

if [[ $# -eq 1 ]] ; then
    message=$1
    git add -A
elif [[ $# -ge 2 ]] ; then
    message=$1
    if isValidDate "$2" >/dev/null 2>&1 ; then
        export GIT_AUTHOR_DATE=$2
        export GIT_COMMITTER_DATE=$2
        git add -A
    else
        shift 1
        git add "$@" || exit 1 # file not exist
    fi
else
    printf "USAGE: git revision <message> [<date=now>] OR git revision <message> [<file(s)=all>]\n"
    exit 1
fi

git commit -S -s -m "$message" &&\
printf "\n\n* * * NEW REVISION DONE * * *\n\n" &&\
git logs 1
